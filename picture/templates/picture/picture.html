{% extends 'base.html' %}
{% block content %}
  <img src="{{ picture.photo_file.url }}" alt="Picture" width="500" height="500" style="object-fit: contain;">
  {% if form %}
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Изменить</button>
    </form>
  {% else %}
    {% if picture.author %}
      {{ picture.author }}
    {% else %}
      Автор не указан
    {% endif %}
    <br>
    {{ picture.upload_date }}<br>
    {% if picture.category %}
      {{ picture.category }}
    {% else %}
      Категория не указана
    {% endif %}
    <br>
    
    {% if picture.subcategory.count %}
      {% for subcategory in picture.subcategory.all %}
        {{ subcategory }}
      {% endfor %}
      <a href="{% url 'edit_subcategory' picture.id %}">
        Изменить категории
      </a>
    {% else %}
      Подкатегории не указаны
      {% if picture.subcategory.count %}
      {% else %}
        <a href="{% url 'edit_subcategory' picture.id %}">
          Изменить категории
        </a>
      {% endif %}
      {% if picture.category %}
      {% else %}
        Сперва укажите категории
      {% endif %}
    {% endif %}
    <br>
    {% if picture.description %}
      {{ picture.description }}
    {% else %}
      Описание не указано
    {% endif %}
    <br>
    <a href="{% url 'edit' picture.id %}">
      Редактировать
    </a>
  {% endif %}
{% endblock %}